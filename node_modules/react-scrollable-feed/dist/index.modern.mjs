import*as e from"react";class t extends e.Component{constructor(t){super(t),this.wrapperRef=void 0,this.bottomRef=void 0,this.bottomRef=/*#__PURE__*/e.createRef(),this.wrapperRef=/*#__PURE__*/e.createRef(),this.handleScroll=this.handleScroll.bind(this),this.props.debug&&console.log("Component cstr")}getSnapshotBeforeUpdate(){if(this.props.debug&&console.log("Component ",this.getSnapshotBeforeUpdate.name),this.wrapperRef.current&&this.bottomRef.current){const{viewableDetectionEpsilon:e}=this.props;return t.isViewable(this.wrapperRef.current,this.bottomRef.current,e)}return!1}componentDidUpdate(e,t,o){this.props.debug&&console.log("Component ",this.componentDidUpdate.name);const{forceScroll:r,changeDetectionFilter:n}=this.props;n(e,this.props)&&(r||o)&&this.bottomRef.current&&this.wrapperRef.current&&this.scrollParentToChild(this.wrapperRef.current,this.bottomRef.current)}componentDidMount(){this.props.debug&&console.log("Component ",this.componentDidMount.name),this.bottomRef.current&&this.wrapperRef.current&&this.scrollParentToChild(this.wrapperRef.current,this.bottomRef.current)}scrollParentToChild(e,o){const{viewableDetectionEpsilon:r}=this.props;if(!t.isViewable(e,o,r)){const t=e.getBoundingClientRect(),r=o.getBoundingClientRect().top+e.scrollTop-t.top,{animateScroll:n,onScrollComplete:i}=this.props;n&&(n(e,r),i())}}static isViewable(e,t,o){o=o||0;const r=e.getBoundingClientRect(),n=t.getBoundingClientRect();return n.top>=r.top&&r.top+e.clientHeight-n.top+o>=0}handleScroll(){const{viewableDetectionEpsilon:e,onScroll:o}=this.props;o&&this.bottomRef.current&&this.wrapperRef.current&&o(t.isViewable(this.wrapperRef.current,this.bottomRef.current,e))}scrollToBottom(){this.bottomRef.current&&this.wrapperRef.current&&this.scrollParentToChild(this.wrapperRef.current,this.bottomRef.current)}render(){this.props.debug&&console.log("Component ",this.render.name);const{children:t,className:o}=this.props;/*#__PURE__*/return e.createElement("div",{className:o,style:{maxHeight:"inherit",height:"inherit",overflowY:"auto"},ref:this.wrapperRef,onScroll:this.handleScroll},t,/*#__PURE__*/e.createElement("div",{ref:this.bottomRef}))}}t.defaultProps={forceScroll:!1,animateScroll:(e,t)=>{e.scrollBy?e.scrollBy({top:t}):e.scrollTop=t},onScrollComplete:()=>{},changeDetectionFilter:()=>!0,viewableDetectionEpsilon:2,onScroll:()=>{}};export{t as default};
//# sourceMappingURL=index.modern.mjs.map
